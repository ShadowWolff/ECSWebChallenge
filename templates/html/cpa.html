{% extends "base_with_sidebar.html" %}

{% load static %}

{% block page_content %}

    <div class = "row">
        <div class = "col s12">
            <h2> Common pickup locations </h2>
            <div id="map_pickup"></div>
        </div>
    </div>

    <div class = "row"></div>

    <div class = "row">
        <div class = "col s12">
            <h2> Common drop locations </h2>
            <div id = "map_drop"></div>
        </div>
    </div>

    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB2DoguIu91HZB3c_osKxcVsu2beSDoSDQ&libraries=visualization">
    </script>

    <script>

        // get the center point through kmeans
        // set the map to the center point
        var centerPickup = new google.maps.LatLng(37.774546, -122.433523);
        var centerDrop = new google.maps.LatLng(37.774546, -122.433523);

        // get the data from endpoints
        pickupData = []
        dropData = []

        mapPickup = new google.maps.Map(document.getElementById('map_pickup'), {
          center: centerPickup,
          zoom: 7,
        });

        mapDrop = new google.maps.Map(document.getElementById('map_drop'), {
          center: centerDrop,
          zoom: 7,
        });

        var heatmapPick = new google.maps.visualization.HeatmapLayer({
          data: pickupData
        });
        var heatmapDrop = new google.maps.visualization.HeatmapLayer({
          data: dropData
        });

        heatmapPick.setMap(mapPickup);
        heatmapDrop.setMap(mapDrop);
    </script>


{% endblock %}